angular.module("AcompanhoServices",[]),angular.module("AcompanhoServices").factory("CategoryService",["Restangular",function(e){"use strict";var n={};return n.list=function(){return e.all("categories").getList()},n.listWithFeeds=function(){return e.all("categories").getList({feeds:!0})},n.add=function(n){return e.all("categories").post({name:n})},n}]),angular.module("AcompanhoServices").factory("DialogService",["$modal",function(e){"use strict";var n={};return n.showConfirmDialog=function(n,r){this.confirmMessage=n;var t=e.open({templateUrl:"partials/confirm_dialog.html",controller:"ConfirmDialogController",animation:!0});t.result.then(r)},n}]),angular.module("AcompanhoServices").factory("EntryService",["Restangular",function(e){"use strict";var n={};return n.find=function(n,r){return e.one("entries",n).get({read:r})},n}]),angular.module("AcompanhoServices").factory("FeedService",["Restangular","$q",function(e,n){"use strict";var r={};return r.findEntries=function(n,r,t){return e.one("feeds",n).one("entries").get({page:r,pageSize:t})},r.allUnreadEntries=function(n,r){return e.one("entries").get({page:n,pageSize:r,unread:!0})},r.getFeedById=function(n){return e.one("feeds",n).get()},r.addFeed=function(n){return e.all("feeds").post(n)},r.updateFeed=function(e){return e.put()},r.deleteFeed=function(e){return e.remove()},r.updateAll=function(e){var t=n.defer(),o=[];return e.forEach(function(e){e.feeds.forEach(function(e){e.updating=!0,o.push(r.refreshEntries(e).then(function(){e.updating=!1}))})}),n.all(o).then(function(){t.resolve()}),t.promise},r.refreshEntries=function(n){return e.one("feeds",n._id).one("entries").one("update").get().then(function(e){e.error?n.failedUpdate=!0:(n.failedUpdate=!1,r.updateCount(n))})},r.readEntry=function(n){return e.one("entries",n._id).one("read").get().then(function(e){return e.description})},r.updateCount=function(n){e.one("feeds",n._id).one("unread_count").get().then(function(e){n.unreadCount=e})},r}]),angular.module("AcompanhoServices").factory("ResponseStatusInterceptorService",["$q",function(e){"use strict";var n={};return n.responseError=function(n){if(401===n.status)window.location="/login";else if(500===n.status){var r="Ocorreu um erro";n.data.error&&(r+=": "+n.data.error),alert(r+".")}else 404===n.status&&console.log("Not found");return e.reject(n)},n}]),angular.module("AcompanhoServices").factory("UserService",["Restangular",function(e){"use strict";var n={};return n.getUser=function(){return e.one("user").get()},n}]);